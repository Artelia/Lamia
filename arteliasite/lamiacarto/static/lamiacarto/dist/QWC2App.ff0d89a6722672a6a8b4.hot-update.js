webpackHotUpdate("QWC2App",{

/***/ "./lamiacarto/static/lamiacarto/js/EditingInterface.js":
/*!*************************************************************!*\
  !*** ./lamiacarto/static/lamiacarto/js/EditingInterface.js ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/**\n * Copyright 2017, Sourcepole AG.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n/**\n * NOTE: This sample editing interface is designed to work with the counterpart at\n *       https://github.com/qwc-services/qwc-data-service\n *\n * You can use any other editing backend by implementing the getFeature, addFeature,\n * editFeature and deleteFeature methods as necessary.\n */\nconst axios = __webpack_require__(/*! axios */ \"./node_modules/axios/index.js\");\n\nconst assign = __webpack_require__(/*! object-assign */ \"./node_modules/object-assign/index.js\");\n\nconst {\n  isEmpty\n} = __webpack_require__(/*! lodash */ \"./node_modules/lodash/lodash.js\");\n\nconst CoordinatesUtils = __webpack_require__(/*! qwc2/utils/CoordinatesUtils */ \"./qwc2/utils/CoordinatesUtils.js\");\n\nconst ConfigUtils = __webpack_require__(/*! qwc2/utils/ConfigUtils */ \"./qwc2/utils/ConfigUtils.js\");\n\nfunction buildErrMsg(err) {\n  let message = \"Commit failed\";\n\n  if (err.response && err.response.data && err.response.data.message) {\n    message = err.response.data.message;\n\n    if (err.response.data.geometry_errors) {\n      message += \":\\n\";\n      message += err.response.data.geometry_errors.map(entry => \" - \" + entry.reason + \" at \" + entry.location);\n    }\n  }\n\n  return message;\n}\n\nfunction getFeature(layerId, mapPos, mapCrs, mapScale, dpi, callback) {\n  const SERVICE_URL = ConfigUtils.getConfigProp(\"editServiceUrl\"); // 5px tolerance\n\n  let tol = 5.0 / dpi * 0.0254 * mapScale;\n  let bbox = mapPos[0] - tol + \",\" + (mapPos[1] - tol) + \",\" + (mapPos[0] + tol) + \",\" + (mapPos[1] + tol);\n  let req = SERVICE_URL + layerId + '?bbox=' + bbox + '&crs=' + mapCrs;\n  axios.get(req).then(response => {\n    if (response.data && !isEmpty(response.data.features)) {\n      let feature = response.data;\n      callback(feature);\n    } else {\n      callback(null);\n    }\n  }).catch(err => callback(null));\n}\n\nfunction addFeature(layerId, feature, mapCrs, callback) {\n  const SERVICE_URL = ConfigUtils.getConfigProp(\"editServiceUrl\");\n  let req = SERVICE_URL + layerId + '/'; // Add CRS\n\n  let epsgCode = mapCrs.split(':')[1];\n  feature = assign({}, feature, {\n    crs: {\n      type: \"name\",\n      properties: {\n        name: \"urn:ogc:def:crs:EPSG::\" + epsgCode\n      }\n    }\n  });\n  axios.post(req, feature).then(response => {\n    callback(true);\n  }).catch(err => callback(false, buildErrMsg(err)));\n}\n\nfunction editFeature(layerId, feature, mapCrs, callback) {\n  const SERVICE_URL = ConfigUtils.getConfigProp(\"editServiceUrl\");\n  let req = SERVICE_URL + layerId + '/' + feature.id; // Add CRS\n\n  let epsgCode = mapCrs.split(':')[1];\n  feature = assign({}, feature, {\n    crs: {\n      type: \"name\",\n      properties: {\n        name: \"urn:ogc:def:crs:EPSG::\" + epsgCode\n      }\n    }\n  });\n  axios.put(req, feature).then(response => {\n    callback(true);\n  }).catch(err => callback(false, buildErrMsg(err)));\n}\n\nfunction deleteFeature(layerId, featureId, callback) {\n  const SERVICE_URL = ConfigUtils.getConfigProp(\"editServiceUrl\");\n  let req = SERVICE_URL + layerId + '/' + featureId;\n  axios.delete(req).then(response => {\n    callback(true);\n  }).catch(err => callback(false, buildErrMsg(err)));\n}\n\nfunction getRelations(layerId, featureId, tables, callback) {\n  const SERVICE_URL = ConfigUtils.getConfigProp(\"editServiceUrl\");\n  let req = SERVICE_URL + layerId + '/' + featureId + \"/relations?tables=\" + tables;\n  axios.get(req).then(response => {\n    callback(response.data);\n  }).catch(err => callback({}));\n}\n\nfunction writeRelations(layerId, featureId, relations, callback) {\n  const SERVICE_URL = ConfigUtils.getConfigProp(\"editServiceUrl\");\n  let req = SERVICE_URL + layerId + '/' + featureId + \"/relations\";\n  axios.post(req, relations).then(response => {\n    callback(response.data);\n  }).catch(err => callback(false, buildErrMsg(err)));\n}\n\nfunction getKeyValues(keyvalues, callback) {\n  const SERVICE_URL = ConfigUtils.getConfigProp(\"editServiceUrl\");\n  let req = SERVICE_URL + \"keyvals?tables=\" + keyvalues;\n  axios.get(req).then(response => {\n    callback(response.data);\n  }).catch(err => callback({}));\n}\n\nmodule.exports = {\n  getFeature,\n  addFeature,\n  editFeature,\n  deleteFeature,\n  getRelations,\n  writeRelations,\n  getKeyValues\n};\n\n//# sourceURL=webpack:///./lamiacarto/static/lamiacarto/js/EditingInterface.js?");

/***/ }),

/***/ "./lamiacarto/static/lamiacarto/js/Help.jsx":
/*!**************************************************!*\
  !*** ./lamiacarto/static/lamiacarto/js/Help.jsx ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/**\n * Copyright 2016, Sourcepole AG.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree.\n */\nconst React = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n\nfunction renderHelp() {\n  return /*#__PURE__*/React.createElement(\"div\", null, \"Help\");\n}\n\nmodule.exports = renderHelp;\n\n//# sourceURL=webpack:///./lamiacarto/static/lamiacarto/js/Help.jsx?");

/***/ }),

/***/ "./lamiacarto/static/lamiacarto/js/SearchProviders.js":
/*!************************************************************!*\
  !*** ./lamiacarto/static/lamiacarto/js/SearchProviders.js ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/**\n * Copyright 2016, Sourcepole AG.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n/**\nSearch provider interface:\n--------------------------\n\n  onSearch: function(text, requestId, searchOptions, dispatch, state) {\n      let results = [ ... ]; // See below\n      return addSearchResults({data: results, provider: providerId, reqId: requestId}, true);\n      // or\n      return dispatch( (...) => {\n        return addSearchResults({data: results, provider: providerId, reqId: requestId}, true);\n    });\n  }\n\n  getResultGeometry: function(resultItem, callback) {\n    // ...\n    callback(resultItem, geometryWktString);\n  }\n\n  getMoreResults: function(moreItem, text, requestId, dispatch) {\n    // Same return object as onSearch\n  }\n\n\nFormat of search results:\n-------------------------\n\n  results = [\n    {\n        id: categoryid,                     // Unique category ID\n        title: display_title,               // Text to display as group title in the search results\n        priority: priority_nr,              // Optional search result group priority. Groups with higher priority are displayed first in the list.\n        items: [\n            {                                 // Location search result:\n                type: SearchResultType.PLACE,   // Specifies that this is a location search result\n                id: itemid,                     // Unique item ID\n                text: display_text,             // Text to display as search result\n                label: map_label_text,          // Optional, text to show next to the position marker on the map instead of <text>\n                x: x,                           // X coordinate of result\n                y: y,                           // Y coordinate of result\n                crs: crs,                       // CRS of result coordinates and bbox\n                bbox: [xmin, ymin, xmax, ymax], // Bounding box of result (if non-empty, map will zoom to this extent when selecting result)\n                provider: providerid            // The ID of the provider which generated this result. Required if `getResultGeometry` is to be called.\n            },\n            {                                   // Theme layer search result (advanced):\n                type: SearchResultType.THEMELAYER, // Specifies that this is a theme layer search result\n                id: itemid,                        // Unique item ID\n                text: display_text,                // Text to display as search result\n                layer: {<Layer definition>}        // Layer definition, in the same format as a \"sublayers\" entry in themes.json.\n            },\n            {                        // Optional entry to request more results:\n                id: itemid,            // Unique item ID\n                more: true,            // Specifies that this entry is a \"More...\" entry\n                provider: providerid   // The ID of the provider which generated this result.\n            }\n        ]\n    },\n    {\n        ...\n    }\n  ]\n\n*/\nconst axios = __webpack_require__(/*! axios */ \"./node_modules/axios/index.js\");\n\nconst {\n  addSearchResults,\n  SearchResultType\n} = __webpack_require__(/*! qwc2/actions/search */ \"./qwc2/actions/search.js\");\n\nconst CoordinatesUtils = __webpack_require__(/*! qwc2/utils/CoordinatesUtils */ \"./qwc2/utils/CoordinatesUtils.js\");\n\nfunction coordinatesSearch(text, requestId, searchOptions, dispatch) {\n  let displaycrs = searchOptions.displaycrs || \"EPSG:4326\";\n  let matches = text.match(/^\\s*([+-]?\\d+\\.?\\d*)[,\\s]\\s*([+-]?\\d+\\.?\\d*)\\s*$/);\n  let items = [];\n\n  if (matches && matches.length >= 3) {\n    let x = parseFloat(matches[1]);\n    let y = parseFloat(matches[2]);\n\n    if (displaycrs !== \"EPSG:4326\") {\n      items.push({\n        id: \"coord0\",\n        text: x + \", \" + y + \" (\" + displaycrs + \")\",\n        x: x,\n        y: y,\n        crs: displaycrs,\n        bbox: [x, y, x, y]\n      });\n    }\n\n    if (x >= -180 && x <= 180 && y >= -90 && y <= 90) {\n      let title = Math.abs(x) + (x >= 0 ? \"°E\" : \"°W\") + \", \" + Math.abs(y) + (y >= 0 ? \"°N\" : \"°S\");\n      items.push({\n        id: \"coord\" + items.length,\n        text: title,\n        x: x,\n        y: y,\n        crs: \"EPSG:4326\",\n        bbox: [x, y, x, y]\n      });\n    }\n\n    if (x >= -90 && x <= 90 && y >= -180 && y <= 180 && x != y) {\n      let title = Math.abs(y) + (y >= 0 ? \"°E\" : \"°W\") + \", \" + Math.abs(x) + (x >= 0 ? \"°N\" : \"°S\");\n      items.push({\n        id: \"coord\" + items.length,\n        text: title,\n        x: y,\n        y: x,\n        crs: \"EPSG:4326\",\n        bbox: [y, x, y, x]\n      });\n    }\n  }\n\n  let results = [];\n\n  if (items.length > 0) {\n    results.push({\n      id: \"coords\",\n      titlemsgid: \"search.coordinates\",\n      items: items\n    });\n  }\n\n  dispatch(addSearchResults({\n    data: results,\n    provider: \"coordinates\",\n    reqId: requestId\n  }, true));\n} ////////////////////////////////////////////////////////////////////////////////\n\n\nfunction geoAdminLocationSearch(text, requestId, searchOptions, dispatch) {\n  axios.get(\"http://api3.geo.admin.ch/rest/services/api/SearchServer?searchText=\" + encodeURIComponent(text) + \"&type=locations&limit=20\").then(response => dispatch(geoAdminLocationSearchResults(response.data, requestId)));\n}\n\nfunction parseItemBBox(bboxstr) {\n  if (bboxstr === undefined) {\n    return null;\n  }\n\n  let matches = bboxstr.match(/^BOX\\s*\\(\\s*(\\d+\\.?\\d*)\\s*(\\d+\\.?\\d*)\\s*,\\s*(\\d+\\.?\\d*)\\s*(\\d+\\.?\\d*)\\s*\\)$/);\n\n  if (matches && matches.length < 5) {\n    return null;\n  }\n\n  let xmin = parseFloat(matches[1]);\n  let ymin = parseFloat(matches[2]);\n  let xmax = parseFloat(matches[3]);\n  let ymax = parseFloat(matches[4]);\n  return CoordinatesUtils.reprojectBbox([xmin, ymin, xmax, ymax], \"EPSG:21781\", \"EPSG:4326\");\n}\n\nfunction geoAdminLocationSearchResults(obj, requestId) {\n  let categoryMap = {\n    gg25: \"Municipalities\",\n    kantone: \"Cantons\",\n    district: \"Districts\",\n    sn25: \"Places\",\n    zipcode: \"Zip Codes\",\n    address: \"Address\",\n    gazetteer: \"General place name directory\"\n  };\n  let resultGroups = {};\n  (obj.results || []).map(entry => {\n    if (resultGroups[entry.attrs.origin] == undefined) {\n      resultGroups[entry.attrs.origin] = {\n        id: entry.attrs.origin,\n        title: categoryMap[entry.attrs.origin] || entry.attrs.origin,\n        items: []\n      };\n    }\n\n    let x = entry.attrs.lon;\n    let y = entry.attrs.lat;\n    resultGroups[entry.attrs.origin].items.push({\n      id: entry.id,\n      text: entry.attrs.label,\n      x: x,\n      y: y,\n      crs: \"EPSG:4326\",\n      bbox: parseItemBBox(entry.attrs.geom_st_box2d) || [x, y, x, y],\n      provider: \"geoadmin\"\n    });\n  });\n  let results = [];\n\n  for (let key in resultGroups) {\n    results.push(resultGroups[key]);\n  }\n\n  return addSearchResults({\n    data: results,\n    provider: \"geoadmin\",\n    reqId: requestId\n  }, true);\n} ////////////////////////////////////////////////////////////////////////////////\n\n\nfunction usterSearch(text, requestId, searchOptions, dispatch) {\n  axios.get(\"https://webgis.uster.ch/wsgi/search.wsgi?&searchtables=&query=\" + encodeURIComponent(text)).then(response => dispatch(usterSearchResults(response.data, requestId)));\n}\n\nfunction usterSearchResults(obj, requestId) {\n  let results = [];\n  let currentgroup = null;\n  let groupcounter = 0;\n  let counter = 0;\n  (obj.results || []).map(entry => {\n    if (!entry.bbox) {\n      // Is group\n      currentgroup = {\n        id: \"ustergroup\" + groupcounter++,\n        title: entry.displaytext,\n        items: []\n      };\n      results.push(currentgroup);\n    } else if (currentgroup) {\n      currentgroup.items.push({\n        id: \"usterresult\" + counter++,\n        text: entry.displaytext,\n        searchtable: entry.searchtable,\n        bbox: entry.bbox.slice(0),\n        x: 0.5 * (entry.bbox[0] + entry.bbox[2]),\n        y: 0.5 * (entry.bbox[1] + entry.bbox[3]),\n        crs: \"EPSG:21781\",\n        provider: \"uster\"\n      });\n    }\n  });\n  return addSearchResults({\n    data: results,\n    provider: \"uster\",\n    reqId: requestId\n  }, true);\n}\n\nfunction usterResultGeometry(resultItem, callback) {\n  axios.get(\"https://webgis.uster.ch/wsgi/getSearchGeom.wsgi?searchtable=\" + encodeURIComponent(resultItem.searchtable) + \"&displaytext=\" + encodeURIComponent(resultItem.text)).then(response => callback(resultItem, response.data, \"EPSG:21781\"));\n} ////////////////////////////////////////////////////////////////////////////////\n\n\nfunction wolfsburgSearch(text, requestId, searchOptions, dispatch) {\n  axios.get(\"https://geoportal.stadt.wolfsburg.de/wsgi/search.wsgi\", {\n    params: {\n      query: text,\n      searchTables: '[\"Infrastruktur\", \"Stadt- und Ortsteile\"]',\n      searchFilters: '[\"Abfallwirtschaft,Haltestellen,Hilfsorganisationen\", \"\"]',\n      searchArea: \"Wolfsburg\",\n      searchCenter: \"\",\n      searchRadius: \"\",\n      topic: \"stadtplan\",\n      resultLimit: 100,\n      resultLimitCategory: 100\n    }\n  }).then(response => dispatch(wolfsburgSearchResults(response.data, requestId)));\n}\n\nfunction wolfsburgSearchResults(obj, requestId) {\n  let results = [];\n  let currentgroup = null;\n  let groupcounter = 0;\n  let counter = 0;\n  (obj.results || []).map(entry => {\n    if (!entry.bbox) {\n      // Is group\n      currentgroup = {\n        id: \"wolfsburggroup\" + groupcounter++,\n        title: entry.displaytext,\n        items: []\n      };\n      results.push(currentgroup);\n    } else if (currentgroup) {\n      currentgroup.items.push({\n        id: \"wolfsburgresult\" + counter++,\n        text: entry.displaytext,\n        searchtable: entry.searchtable,\n        oid: entry.id,\n        bbox: entry.bbox.slice(0),\n        x: 0.5 * (entry.bbox[0] + entry.bbox[2]),\n        y: 0.5 * (entry.bbox[1] + entry.bbox[3]),\n        crs: \"EPSG:25832\",\n        provider: \"wolfsburg\"\n      });\n    }\n  });\n  return addSearchResults({\n    data: results,\n    provider: \"wolfsburg\",\n    reqId: requestId\n  }, true);\n}\n\nfunction wolfsburgResultGeometry(resultItem, callback) {\n  axios.get(\"https://geoportal.stadt.wolfsburg.de/wsgi/getSearchGeom.wsgi\", {\n    params: {\n      searchtable: resultItem.searchtable,\n      id: resultItem.oid\n    }\n  }).then(response => callback(resultItem, response.data, \"EPSG:25832\"));\n} ////////////////////////////////////////////////////////////////////////////////\n\n\nfunction glarusSearch(text, requestId, searchOptions, dispatch) {\n  let limit = 9;\n  axios.get(\"https://map.geo.gl.ch/search/all?limit=\" + limit + \"&query=\" + encodeURIComponent(text)).then(response => dispatch(glarusSearchResults(response.data, requestId, limit))).catch(error => dispatch(glarusSearchResults({}, requestId, limit)));\n}\n\nfunction glarusMoreResults(moreItem, text, requestId, dispatch) {\n  axios.get(\"https://map.geo.gl.ch/search/\" + moreItem.category + \"?query=\" + encodeURIComponent(text)).then(response => dispatch(glarusSearchResults(response.data, requestId))).catch(error => dispatch(glarusSearchResults({}, requestId)));\n}\n\nfunction glarusSearchResults(obj, requestId, limit = -1) {\n  let results = [];\n  let idcounter = 0;\n  (obj.results || []).map(group => {\n    let groupResult = {\n      id: group.category,\n      title: group.name,\n      items: group.features.map(item => {\n        return {\n          id: item.id,\n          text: item.name,\n          bbox: item.bbox.slice(0),\n          x: 0.5 * (item.bbox[0] + item.bbox[2]),\n          y: 0.5 * (item.bbox[1] + item.bbox[3]),\n          crs: \"EPSG:2056\",\n          provider: \"glarus\",\n          category: group.category\n        };\n      })\n    };\n\n    if (limit >= 0 && group.features.length > limit) {\n      groupResult.items.push({\n        id: \"glarusmore\" + idcounter++,\n        more: true,\n        provider: \"glarus\",\n        category: group.category\n      });\n    }\n\n    results.push(groupResult);\n  });\n  return addSearchResults({\n    data: results,\n    provider: \"glarus\",\n    reqId: requestId\n  }, true);\n}\n\nfunction glarusResultGeometry(resultItem, callback) {\n  axios.get(\"https://map.geo.gl.ch/search/\" + resultItem.category + \"/geometry?id=\" + resultItem.id).then(response => callback(resultItem, response.data, \"EPSG:2056\"));\n} ///////////////////////////////////////////////////////////////////////////////\n\n\nfunction nominatimSearchResults(obj, requestId) {\n  let results = [];\n  let groups = {};\n  let groupcounter = 0;\n  (obj || []).map(entry => {\n    if (!(entry.class in groups)) {\n      groups[entry.class] = {\n        id: \"nominatimgroup\" + groupcounter++,\n        // capitalize class\n        title: entry.class.charAt(0).toUpperCase() + entry.class.slice(1),\n        items: []\n      };\n      results.push(groups[entry.class]);\n    } // shorten display_name\n\n\n    let text = entry.display_name.split(', ').slice(0, 3).join(', '); // map label\n\n    let label = text; // collect address fields\n\n    let address = [];\n\n    if (entry.address.town) {\n      address.push(entry.address.town);\n    }\n\n    if (entry.address.city) {\n      address.push(entry.address.city);\n    }\n\n    if (entry.address.state) {\n      address.push(entry.address.state);\n    }\n\n    if (entry.address.country) {\n      address.push(entry.address.country);\n    }\n\n    if (address.length > 0) {\n      text += \"<br/><i>\" + address.join(', ') + \"</i>\";\n    } // reorder coords from [miny, maxy, minx, maxx] to [minx, miny, maxx, maxy]\n\n\n    const b = entry.boundingbox.map(coord => parseFloat(coord));\n    let bbox = [b[2], b[0], b[3], b[1]];\n    groups[entry.class].items.push({\n      id: entry.place_id,\n      // shorten display_name\n      text: text,\n      label: label,\n      bbox: bbox,\n      x: 0.5 * (bbox[0] + bbox[2]),\n      y: 0.5 * (bbox[1] + bbox[3]),\n      crs: \"EPSG:4326\",\n      provider: \"nominatim\"\n    });\n  });\n  return addSearchResults({\n    data: results,\n    provider: \"nominatim\",\n    reqId: requestId\n  }, true);\n}\n\nfunction nominatimSearch(text, requestId, searchOptions, dispatch) {\n  axios.get(\"//nominatim.openstreetmap.org/search\", {\n    params: {\n      q: text,\n      addressdetails: 1,\n      limit: 20,\n      format: 'json'\n    }\n  }).then(response => dispatch(nominatimSearchResults(response.data, requestId)));\n} ///////////////////////////////////////////////////////////////////////////////\n\n\nfunction parametrizedSearch(cfg, text, requestId, searchOptions, dispatch) {\n  let SEARCH_URL = \"\"; // ...\n\n  axios.get(SEARCH_URL + \"?param=\" + cfg.param + \"&searchtext=\" + encodeURIComponent(text)).then(response => dispatch(addSearchResults({\n    data: response.data,\n    provider: cfg.key,\n    reqId: requestId\n  }))).catch(error => dispatch(addSearchResults({\n    data: [],\n    provider: cfg.key,\n    reqId: requestId\n  })));\n} ///////////////////////////////////////////////////////////////////////////////\n\n\nfunction layerSearch(text, requestId, searchOptions, dispatch) {\n  let results = [];\n\n  if (text === \"bahnhof\") {\n    let layer = {\n      sublayers: [{\n        name: \"a\",\n        title: \"a\",\n        visibility: true,\n        queryable: true,\n        displayField: \"maptip\",\n        opacity: 255,\n        bbox: {\n          crs: \"EPSG:4326\",\n          bounds: [8.53289, 47.3768, 8.54141, 47.3803]\n        }\n      }]\n    };\n    results.push({\n      id: \"layers\",\n      title: \"Layers\",\n      items: [{\n        type: SearchResultType.THEMELAYER,\n        id: \"bahnhof\",\n        text: \"Bahnhof\",\n        layer: layer\n      }]\n    });\n  }\n\n  dispatch(addSearchResults({\n    data: results,\n    provider: \"layers\",\n    reqId: requestId\n  }, true));\n} ////////////////////////////////////////////////////////////////////////////////\n\n\nmodule.exports = {\n  SearchProviders: {\n    \"coordinates\": {\n      labelmsgid: \"search.coordinates\",\n      onSearch: coordinatesSearch\n    },\n    \"geoadmin\": {\n      label: \"Swisstopo\",\n      onSearch: geoAdminLocationSearch,\n      requiresLayer: \"a\" // Make provider availability depend on the presence of a theme WMS layer\n\n    },\n    \"uster\": {\n      label: \"Uster\",\n      onSearch: usterSearch,\n      getResultGeometry: usterResultGeometry\n    },\n    \"wolfsburg\": {\n      label: \"Wolfsburg\",\n      onSearch: wolfsburgSearch,\n      getResultGeometry: wolfsburgResultGeometry\n    },\n    \"glarus\": {\n      label: \"Glarus\",\n      onSearch: glarusSearch,\n      getResultGeometry: glarusResultGeometry,\n      getMoreResults: glarusMoreResults\n    },\n    \"nominatim\": {\n      label: \"OpenStreetMap\",\n      onSearch: nominatimSearch\n    },\n    \"layers\": {\n      label: \"Layers\",\n      onSearch: layerSearch\n    }\n  },\n  searchProviderFactory: cfg => {\n    // Note: cfg corresponds to an entry of the theme searchProviders array in themesConfig.json, in this case\n    //   { key: <providerKey>, label: <label>, param: <param>, ...}\n    // The entry must have at least a `key`.\n    return {\n      label: cfg.label,\n      onSearch: (text, requestId, searchOptions, dispatch) => parametrizedSearch(cfg, text, requestId, searchOptions, dispatch),\n      requiresLayer: cfg.layerName\n    };\n  }\n};\n\n//# sourceURL=webpack:///./lamiacarto/static/lamiacarto/js/SearchProviders.js?");

/***/ }),

/***/ "./lamiacarto/static/lamiacarto/js/app.jsx":
/*!*************************************************!*\
  !*** ./lamiacarto/static/lamiacarto/js/app.jsx ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/**\n * Copyright 2016, Sourcepole AG.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree.\n */\nconst React = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n\nconst ReactDOM = __webpack_require__(/*! react-dom */ \"./node_modules/react-dom/index.js\"); //popo\n\n\nconst appConfig = __webpack_require__(/*! ./appConfig */ \"./lamiacarto/static/lamiacarto/js/appConfig.js\");\n\nconst StandardApp = __webpack_require__(/*! qwc2/components/StandardApp */ \"./qwc2/components/StandardApp.jsx\");\n\n__webpack_require__(/*! ../icons/build/qwc2-icons.css */ \"./lamiacarto/static/lamiacarto/icons/build/qwc2-icons.css\"); // import 'bootstrap/dist/css/bootstrap.min.css';\n// import 'bootstrap';\n\n\nconst bootstrap = __webpack_require__(/*! bootstrap */ \"./node_modules/bootstrap/dist/js/bootstrap.js\");\n\n__webpack_require__(/*! bootstrap/dist/css/bootstrap.min.css */ \"./node_modules/bootstrap/dist/css/bootstrap.min.css\");\n\ncontext = JSON.parse(JSON.parse(document.getElementById('context').textContent));\nthemeurl = window.location.host + '/lamiaapi/' + context.id_project + '/themes';\nconsole.log(themeurl);\nReactDOM.render( /*#__PURE__*/React.createElement(StandardApp, {\n  appConfig: appConfig,\n  themes: themeurl,\n  style: {\n    position: \"relative\",\n    top: \"50px\"\n  }\n}), document.getElementById('container'));\n\n//# sourceURL=webpack:///./lamiacarto/static/lamiacarto/js/app.jsx?");

/***/ }),

/***/ "./lamiacarto/static/lamiacarto/js/appConfig.js":
/*!******************************************************!*\
  !*** ./lamiacarto/static/lamiacarto/js/appConfig.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/**\n * Copyright 2016, Sourcepole AG.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree.\n */\nconst {\n  SearchProviders,\n  searchProviderFactory\n} = __webpack_require__(/*! ./SearchProviders */ \"./lamiacarto/static/lamiacarto/js/SearchProviders.js\");\n\nconst EditingInterface = __webpack_require__(/*! ./EditingInterface */ \"./lamiacarto/static/lamiacarto/js/EditingInterface.js\");\n\nconst renderHelp = __webpack_require__(/*! ./Help */ \"./lamiacarto/static/lamiacarto/js/Help.jsx\");\n\nmodule.exports = {\n  initialState: {\n    defaultState: {},\n    mobile: {}\n  },\n  pluginsDef: {\n    plugins: {\n      MapPlugin: __webpack_require__(/*! qwc2/plugins/Map */ \"./qwc2/plugins/Map.jsx\")({\n        EditingSupport: __webpack_require__(/*! qwc2/plugins/map/EditingSupport */ \"./qwc2/plugins/map/EditingSupport.jsx\"),\n        MeasurementSupport: __webpack_require__(/*! qwc2/plugins/map/MeasurementSupport */ \"./qwc2/plugins/map/MeasurementSupport.jsx\"),\n        LocateSupport: __webpack_require__(/*! qwc2/plugins/map/LocateSupport */ \"./qwc2/plugins/map/LocateSupport.jsx\"),\n        OverviewSupport: __webpack_require__(/*! qwc2/plugins/map/OverviewSupport */ \"./qwc2/plugins/map/OverviewSupport.jsx\"),\n        RedliningSupport: __webpack_require__(/*! qwc2/plugins/map/RedliningSupport */ \"./qwc2/plugins/map/RedliningSupport.jsx\"),\n        ScaleBarSupport: __webpack_require__(/*! qwc2/plugins/map/ScaleBarSupport */ \"./qwc2/plugins/map/ScaleBarSupport.jsx\"),\n        SelectionSupport: __webpack_require__(/*! qwc2/plugins/map/SelectionSupport */ \"./qwc2/plugins/map/SelectionSupport.jsx\")\n      }),\n      LamiaPlugin: __webpack_require__(/*! ./plugins/Lamia */ \"./lamiacarto/static/lamiacarto/js/plugins/Lamia.jsx\"),\n      HomeButtonPlugin: __webpack_require__(/*! qwc2/plugins/HomeButton */ \"./qwc2/plugins/HomeButton.jsx\"),\n      LocateButtonPlugin: __webpack_require__(/*! qwc2/plugins/LocateButton */ \"./qwc2/plugins/LocateButton.jsx\"),\n      ZoomInPlugin: __webpack_require__(/*! qwc2/plugins/ZoomButtons */ \"./qwc2/plugins/ZoomButtons.jsx\"),\n      ZoomOutPlugin: __webpack_require__(/*! qwc2/plugins/ZoomButtons */ \"./qwc2/plugins/ZoomButtons.jsx\"),\n      TaskButtonPlugin: __webpack_require__(/*! qwc2/plugins/TaskButton */ \"./qwc2/plugins/TaskButton.jsx\"),\n      BackgroundSwitcherPlugin: __webpack_require__(/*! qwc2/plugins/BackgroundSwitcher */ \"./qwc2/plugins/BackgroundSwitcher.jsx\"),\n      // TopBarPlugin: require('qwc2/plugins/TopBar')({\n      //      AppMenu: require(\"qwc2/components/AppMenu\"),\n      //      Search: require(\"qwc2/components/Search\")(SearchProviders, searchProviderFactory),\n      //      Toolbar: require(\"qwc2/components/Toolbar\"),\n      //      FullscreenSwitcher: require(\"qwc2/components/FullscreenSwitcher\")\n      // }),\n      BottomBarPlugin: __webpack_require__(/*! qwc2/plugins/BottomBar */ \"./qwc2/plugins/BottomBar.jsx\"),\n      MeasurePlugin: __webpack_require__(/*! qwc2/plugins/Measure */ \"./qwc2/plugins/Measure.jsx\"),\n      ThemeSwitcherPlugin: __webpack_require__(/*! qwc2/plugins/ThemeSwitcher */ \"./qwc2/plugins/ThemeSwitcher.jsx\"),\n      LayerTreePlugin: __webpack_require__(/*! qwc2/plugins/LayerTree */ \"./qwc2/plugins/LayerTree.jsx\"),\n      // IdentifyPlugin: require('qwc2/plugins/Identify'),\n      MapTipPlugin: __webpack_require__(/*! qwc2/plugins/MapTip */ \"./qwc2/plugins/MapTip.jsx\"),\n      SharePlugin: __webpack_require__(/*! qwc2/plugins/Share */ \"./qwc2/plugins/Share.jsx\"),\n      MapCopyrightPlugin: __webpack_require__(/*! qwc2/plugins/MapCopyright */ \"./qwc2/plugins/MapCopyright.jsx\"),\n      PrintPlugin: __webpack_require__(/*! qwc2/plugins/Print */ \"./qwc2/plugins/Print.jsx\"),\n      HelpPlugin: __webpack_require__(/*! qwc2/plugins/Help */ \"./qwc2/plugins/Help.jsx\")(renderHelp),\n      DxfExportPlugin: __webpack_require__(/*! qwc2/plugins/DxfExport */ \"./qwc2/plugins/DxfExport.jsx\"),\n      RasterExportPlugin: __webpack_require__(/*! qwc2/plugins/RasterExport */ \"./qwc2/plugins/RasterExport.jsx\"),\n      RedliningPlugin: __webpack_require__(/*! qwc2/plugins/Redlining */ \"./qwc2/plugins/Redlining.jsx\")({// BufferSupport: require('qwc2/plugins/redlining/RedliningBufferSupport')\n      }),\n      EditingPlugin: __webpack_require__(/*! qwc2/plugins/Editing */ \"./qwc2/plugins/Editing.jsx\")(EditingInterface),\n      MapComparePlugin: __webpack_require__(/*! qwc2/plugins/MapCompare */ \"./qwc2/plugins/MapCompare.jsx\"),\n      HeightProfilePlugin: __webpack_require__(/*! qwc2/plugins/HeightProfile */ \"./qwc2/plugins/HeightProfile.jsx\"),\n      MapInfoTooltipPlugin: __webpack_require__(/*! qwc2/plugins/MapInfoTooltip */ \"./qwc2/plugins/MapInfoTooltip.jsx\"),\n      IdentifyRegionPlugin: __webpack_require__(/*! qwc2/plugins/IdentifyRegion */ \"./qwc2/plugins/IdentifyRegion.jsx\"),\n      StartupMarkerPlugin: __webpack_require__(/*! qwc2/plugins/StartupMarker */ \"./qwc2/plugins/StartupMarker.jsx\")\n    },\n    cfg: {\n      IdentifyPlugin: {\n        attributeCalculator: __webpack_require__(/*! ./CustomAttributeCalculator */ \"./lamiacarto/static/lamiacarto/js/CustomAttributeCalculator.jsx\")\n      }\n    }\n  },\n  actionLogger: action => {\n    /* Do something with action, i.e. Piwik/Mamoto event tracking */\n  },\n  themeLayerRestorer: (missingLayers, theme, callback) => {\n    // Invoked for layers specified in the l url parameter which are missing in the specified theme\n    // Could be used to query a search provider for the missing theme layers\n    // A list of theme layers to merge into the theme\n    let newLayers = []; // A dictionary mapping the name of the searched layer name with the resulting layer name(s) as an array, i.e.\n    // {searchlayername: [\"resultlayername1\", \"resultlayername2\"], ...}\n\n    let newLayerNames = {};\n    callback(newLayers, newLayerNames);\n  },\n\n  /*externalLayerRestorer: (externalLayers, themes, callback) => {\n      // Optional function to handle restoring of external layers from the l URL parameter\n      // If omitted, the default handler is used which downloads capabilities for each service to restore the layer\n  },*/\n  supportedLocales: {\n    \"pt\": {\n      code: \"pt-BR\",\n      description: \"Português Brasil\",\n      localeData: __webpack_require__(/*! react-intl/locale-data/pt */ \"./node_modules/react-intl/locale-data/pt.js\")\n    },\n    \"it\": {\n      code: \"it-IT\",\n      description: \"Italiano\",\n      localeData: __webpack_require__(/*! react-intl/locale-data/it */ \"./node_modules/react-intl/locale-data/it.js\")\n    },\n    \"en\": {\n      code: \"en-US\",\n      description: \"English\",\n      localeData: __webpack_require__(/*! react-intl/locale-data/en */ \"./node_modules/react-intl/locale-data/en.js\")\n    },\n    \"fr\": {\n      code: \"fr-FR\",\n      description: \"Français\",\n      localeData: __webpack_require__(/*! react-intl/locale-data/fr */ \"./node_modules/react-intl/locale-data/fr.js\")\n    },\n    \"de\": {\n      code: \"de-DE\",\n      description: \"Deutsch\",\n      localeData: __webpack_require__(/*! react-intl/locale-data/de */ \"./node_modules/react-intl/locale-data/de.js\")\n    },\n    \"ro\": {\n      code: \"ro-RO\",\n      description: \"Română\",\n      localeData: __webpack_require__(/*! react-intl/locale-data/ro */ \"./node_modules/react-intl/locale-data/ro.js\")\n    },\n    \"ru\": {\n      code: \"ru-RU\",\n      description: \"Русский\",\n      localeData: __webpack_require__(/*! react-intl/locale-data/ru */ \"./node_modules/react-intl/locale-data/ru.js\")\n    }\n  }\n};\n\n//# sourceURL=webpack:///./lamiacarto/static/lamiacarto/js/appConfig.js?");

/***/ }),

/***/ "./lamiacarto/static/lamiacarto/js/plugins/Lamia.jsx":
/*!***********************************************************!*\
  !*** ./lamiacarto/static/lamiacarto/js/plugins/Lamia.jsx ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nconst React = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n\nconst {\n  connect\n} = __webpack_require__(/*! react-redux */ \"./node_modules/react-redux/es/index.js\");\n\nconst {\n  SideBar\n} = __webpack_require__(/*! qwc2/components/SideBar */ \"./qwc2/components/SideBar.jsx\");\n\nconst {\n  setCurrentTask\n} = __webpack_require__(/*! qwc2/actions/task */ \"./qwc2/actions/task.js\"); // import ToolTreeWidgetReact from './tooltreewidget'\n// const ToolTreeWidgetReact = require('./tooltreewidget')\n// import VectorLayer from 'ol/layer/Vector';\n// const VectorLayer = require('ol/layer/Vector')\n// import VectorSource from 'ol/source/Vector'\n// const { VectorSource } = require('ol/source/Vector')\n// import { GeoJSON } from 'ol/format';\n// const { GeoJSON } = require('ol/format')\n// const ol = require('ol');\n\n\nconst VectorLayerUtils = __webpack_require__(/*! qwc2/utils/VectorLayerUtils */ \"./qwc2/utils/VectorLayerUtils.js\");\n\nconst ol = __webpack_require__(/*! openlayers */ \"./qwc2/libs/openlayers.js\");\n\nconst {\n  Map,\n  Layer\n} = __webpack_require__(/*! qwc2/plugins/map/MapComponents */ \"./qwc2/plugins/map/MapComponents.jsx\");\n\nconst {\n  addLayer,\n  addLayerFeatures\n} = __webpack_require__(/*! qwc2/actions/layers */ \"./qwc2/actions/layers.js\");\n\nconst MapUtils = __webpack_require__(/*! qwc2/utils/MapUtils */ \"./qwc2/utils/MapUtils.js\");\n\nconst axios = __webpack_require__(/*! axios */ \"./node_modules/axios/index.js\");\n\naxios.defaults.xsrfHeaderName = \"X-CSRFTOKEN\";\naxios.defaults.xsrfCookieName = \"csrftoken\";\n\nconst EdgeEditingFormReact = __webpack_require__(/*! ./forms/base3_urbandrainage/edgewidget */ \"./lamiacarto/static/lamiacarto/js/plugins/forms/base3_urbandrainage/edgewidget.jsx\");\n\nconst NodeEditingFormReact = __webpack_require__(/*! ./forms/base3_urbandrainage/nodewidget */ \"./lamiacarto/static/lamiacarto/js/plugins/forms/base3_urbandrainage/nodewidget.jsx\");\n\nconst MediaEditingFormReact = __webpack_require__(/*! ./forms/base3_urbandrainage/mediawidget */ \"./lamiacarto/static/lamiacarto/js/plugins/forms/base3_urbandrainage/mediawidget.jsx\");\n\nconst ReportEditingFormReact = __webpack_require__(/*! ./forms/base3_urbandrainage/reportwidget */ \"./lamiacarto/static/lamiacarto/js/plugins/forms/base3_urbandrainage/reportwidget.jsx\");\n\nconst IdChooser = __webpack_require__(/*! ./idchooser */ \"./lamiacarto/static/lamiacarto/js/plugins/idchooser.jsx\");\n\nconst {\n  changeSelectionState\n} = __webpack_require__(/*! qwc2/actions/selection */ \"./qwc2/actions/selection.js\");\n\nclass Lamia extends React.Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"workclasses\", [EdgeEditingFormReact, NodeEditingFormReact, MediaEditingFormReact, ReportEditingFormReact]);\n\n    _defineProperty(this, \"projectdata\", JSON.parse(JSON.parse(document.getElementById('context').textContent)));\n\n    _defineProperty(this, \"state\", {});\n\n    _defineProperty(this, \"handleLayerChanged\", evt => {\n      let goodclass = null;\n      this.workclasses.forEach(function (reactclass, idx) {\n        if (reactclass.label === evt.target.id) {\n          // if (reactclass.label === evt) {\n          goodclass = reactclass;\n        }\n      });\n      this.mainwdgrefcreated = false;\n      this.setState({\n        mainwdg: goodclass\n      }); // this.setState({ mainwdg: goodclass, currentwdginstance: this.currentref.current })\n    });\n\n    _defineProperty(this, \"setCurrentWidgetInstance\", cwi => {\n      this.currentwdginstance = cwi; // this.setState({ ids: cwi.ids })\n\n      this.idchooserref.current.setState({\n        ids: cwi.ids\n      });\n    });\n\n    this.state = {\n      'visualmode': 1,\n      'mainwdg': null,\n      'values': null\n    };\n    this.currentwdginstance = null;\n    this.currentref = React.createRef();\n    this.mainwdgrefcreated = false;\n    this.idchooserref = React.createRef();\n  }\n\n  componentDidMount() {}\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.layers) {\n      let found = nextProps.layers.find(layer => layer.title === \"Lamiasel\"); // console.log('found', !found, found)\n\n      if (!found) {\n        let layer = {\n          title: \"Lamiasel\",\n          type: 'vector',\n          layertreehidden: true\n        };\n        nextProps.addLayer(layer);\n      }\n    }\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    let returnvalue = false;\n\n    if (nextState !== this.state) {\n      returnvalue = true;\n    }\n\n    if (nextProps.point !== this.props.point) {\n      if (nextProps.point) {\n        let wdg = this.currentwdginstance;\n\n        if (wdg && wdg !== undefined) {\n          this.pointClicked.bind(this)(nextProps.point.coordinate);\n        }\n      }\n    }\n\n    return returnvalue;\n  }\n\n  componentWillReceiveProps_(nextProps) {\n    console.log('componentWillReceiveProps');\n    console.log('mapchange', nextProps.map !== this.props.map);\n\n    if (nextProps.map !== this.props.map) {\n      return false;\n    } // console.log('shouldComponentUpdate', nextProps)\n    // console.log(this.props)\n    // console.log('shouldComponentUpdate', nextState)\n    // console.log('pp', nextProps === this.props)\n    // console.log('pp', nextState === this.state)\n\n\n    let found = this.props.layers.find(layer => layer.title === \"Lamiasel\");\n    console.log('found', !found, found);\n\n    if (!found) {\n      let layer = {\n        title: \"Lamiasel\",\n        type: 'vector'\n      };\n      this.props.addLayer(layer);\n      return false;\n    }\n\n    console.log('point diff', nextProps.point !== this.props.point);\n\n    if (nextProps.point !== this.props.point) {\n      this.handleMapClick();\n      return false;\n    } // console.log('shouldComponentUpdate', this.props)\n\n\n    return false;\n  }\n\n  render() {\n    console.log('render Lamia', this.props.point);\n    let layersdropdown = this.createLayerDrop.bind(this)();\n    let layersdrop = /*#__PURE__*/React.createElement(\"div\", {\n      className: \"btn-group mr-2\",\n      role: \"group\",\n      \"aria-label\": \"First group\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"dropdown\"\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-secondary dropdown-toggle\",\n      type: \"button\",\n      id: \"dropdownMenuButton\",\n      \"data-toggle\": \"dropdown\",\n      \"aria-haspopup\": \"true\",\n      \"aria-expanded\": \"false\"\n    }, \"Layers\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"dropdown-menu\",\n      \"aria-labelledby\": \"dropdownMenuButton\"\n    }, layersdropdown))); // let idsdropdown = this.createIdDrop.bind(this)()\n\n    let idsdrop = /*#__PURE__*/React.createElement(\"div\", {\n      className: \"btn-group mr-2\",\n      role: \"group\",\n      \"aria-label\": \"First group\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"dropdown\"\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-secondary dropdown-toggle\",\n      type: \"button\",\n      id: \"dropdownMenuButton\",\n      \"data-toggle\": \"dropdown\",\n      \"aria-haspopup\": \"true\",\n      \"aria-expanded\": \"false\"\n    }, \"Ids\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"dropdown-menu\",\n      \"aria-labelledby\": \"dropdownMenuButton\"\n    }, /*#__PURE__*/React.createElement(IdChooser, {\n      ref: this.idchooserref,\n      mainiface: this\n    }))));\n    let butonmenu = /*#__PURE__*/React.createElement(\"div\", {\n      className: \"btn-group mr-2\",\n      role: \"group\",\n      \"aria-label\": \"First group\"\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn btn-secondary\",\n      id: \"canvaspick\",\n      onClick: this.buttonmenuclick.bind(this)\n    }, \"Pick\"), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn btn-secondary\",\n      onClick: this.buttonmenuclick.bind(this)\n    }, \"Middle\"));\n    let extraTitlebarContent = /*#__PURE__*/React.createElement(\"div\", {\n      className: \"btn-toolbar \",\n      role: \"group\",\n      \"aria-label\": \"Basic example\",\n      style: {\n        marginLeft: \"1em\"\n      }\n    }, layersdrop, /*#__PURE__*/React.createElement(IdChooser, {\n      ref: this.idchooserref,\n      mainiface: this\n    }), butonmenu);\n    return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(SideBar, {\n      id: \"Lamia\",\n      width: this.state.sidebarwidth || this.props.width,\n      title: \"Lamia\",\n      icon: \"layers\" // extraBeforeContent={visibilityCheckbox}\n      // onHide={this.hideLegendTooltip} \n      ,\n      extraTitlebarContent: extraTitlebarContent\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      role: \"body\"\n    }, this.state.mainwdg === null ? /*#__PURE__*/React.createElement(\"div\", null) : /*#__PURE__*/React.createElement(this.state.mainwdg, {\n      ref: this.currentref,\n      mainiface: this\n    }))));\n  }\n\n  componentDidUpdate() {\n    if (!this.mainwdgrefcreated) {\n      this.mainwdgrefcreated = true;\n      this.currentwdginstance = this.currentref.current;\n    }\n  }\n\n  others_________________________() {}\n\n  async pointClicked(coords) {\n    let wdg = this.currentwdginstance;\n\n    while (wdg.props.parentwdg) {\n      wdg = wdg.props.parentwdg;\n      console.log('click*', wdg.constructor.name);\n    }\n\n    wdg.pointClicked(coords);\n  }\n\n  buttonmenuclick(evt) {\n    console.log('buttonmenuclick');\n    console.log(this.props);\n  }\n\n  createIdDrop() {\n    if (!this.currentwdginstance) {\n      return;\n    }\n\n    console.log('createIdDrop', this.currentwdginstance.ids);\n    let finaldatas = []; // for (var id in this.currentwdginstance.ids) {\n\n    for (var id in this.state.ids) {\n      console.log(id);\n      finaldatas.push( /*#__PURE__*/React.createElement(\"a\", {\n        className: \"dropdown-item\",\n        id: id,\n        key: id,\n        onClick: this.handleLayerChanged.bind(this) // onClick={() => this.handleLayerChanged.bind(this)}\n\n      }, id)); // finaldatas.push(<a className=\"dropdown-item\" id={dataraw[firstdir][seconddir].label} >{seconddir}</a>)\n    }\n\n    return finaldatas;\n  }\n\n  createLayerDrop() {\n    let dataraw = {};\n    this.workclasses.forEach(function (reactclass, idx) {\n      if (!dataraw.hasOwnProperty(reactclass.firstdir)) {\n        dataraw[reactclass.firstdir] = {};\n      }\n\n      dataraw[reactclass.firstdir][reactclass.label] = reactclass;\n    });\n    let finaldatas = [];\n\n    for (var firstdir in dataraw) {\n      finaldatas.push( /*#__PURE__*/React.createElement(\"h6\", {\n        className: \"dropdown-header\",\n        key: firstdir\n      }, firstdir));\n\n      for (var seconddir in dataraw[firstdir]) {\n        finaldatas.push( /*#__PURE__*/React.createElement(\"a\", {\n          className: \"dropdown-item\",\n          id: dataraw[firstdir][seconddir].label,\n          key: seconddir,\n          onClick: this.handleLayerChanged.bind(this) // onClick={() => this.handleLayerChanged.bind(this)}\n\n        }, seconddir)); // finaldatas.push(<a className=\"dropdown-item\" id={dataraw[firstdir][seconddir].label} >{seconddir}</a>)\n      }\n    }\n\n    ;\n    return finaldatas;\n  }\n\n}\n\n_defineProperty(Lamia, \"propTypes\", {});\n\n_defineProperty(Lamia, \"defaultProps\", {\n  width: '45em',\n  minWidth: '30em'\n});\n\nconst selector = state => ({\n  // enabled: state.task ? state.task.id === 'Editing' : false,\n  // theme: state.theme ? state.theme.current : null,\n  layers: state.layers ? state.layers.flat : [],\n  map: state.map || {},\n  point: state.map && state.map.clickPoint,\n  selection: state.selection // iface: iface,\n  // editing: state.editing || {},\n\n});\n\nmodule.exports = {\n  LamiaPlugin: connect(selector, {\n    addLayer: addLayer,\n    addLayerFeatures: addLayerFeatures,\n    changeSelectionState: changeSelectionState\n  })(Lamia),\n  reducers: {}\n};\n\n//# sourceURL=webpack:///./lamiacarto/static/lamiacarto/js/plugins/Lamia.jsx?");

/***/ }),

/***/ "./lamiacarto/static/lamiacarto/js/plugins/forms/base3_urbandrainage/deficiencywidget.jsx":
/*!************************************************************************************************!*\
  !*** ./lamiacarto/static/lamiacarto/js/plugins/forms/base3_urbandrainage/deficiencywidget.jsx ***!
  \************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n// import EditingFormReact from '../editingformwidget'\n// const EditingFormReact = require('../editingformwidget')\nconst EditingFormReact = __webpack_require__(/*! ../editingformwidget */ \"./lamiacarto/static/lamiacarto/js/plugins/forms/editingformwidget.jsx\");\n\nconst $ = __webpack_require__(/*! jquery */ \"./node_modules/jquery/dist/jquery.js\"); // import ReactDOM from \"react-dom\";\n\n\nconst ReactDOM = __webpack_require__(/*! react-dom */ \"./node_modules/react-dom/index.js\");\n\nconst ObservationEditingFormReact = __webpack_require__(/*! ./observationwidget */ \"./lamiacarto/static/lamiacarto/js/plugins/forms/base3_urbandrainage/observationwidget.jsx\");\n\nclass DeficiencyEditingFormReact extends EditingFormReact {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"table\", 'deficiency');\n\n    _defineProperty(this, \"childwdg\", [ObservationEditingFormReact]);\n\n    this.state = _objectSpread({\n      'currentlayer': '',\n      'currentfeatprop': {},\n      'formui': ''\n    }, this.state);\n    let tempparentjoin = {};\n    let linkdict = {\n      \"colparent\": \"id_descriptionsystem\",\n      \"colthistable\": \"lid_descriptionsystem\",\n      \"tctable\": null,\n      \"tctablecolparent\": null,\n      \"tctablecolthistable\": null\n    };\n    let tables = [\"node\", \"edge\", \"equipment\"];\n    tables.forEach(el => {\n      tempparentjoin[el] = linkdict;\n    });\n    this.PARENTJOIN = tempparentjoin;\n  }\n\n  domLoaded() {}\n\n}\n\n_defineProperty(DeficiencyEditingFormReact, \"firstdir\", 'State');\n\n_defineProperty(DeficiencyEditingFormReact, \"label\", 'Deficiency');\n\nmodule.exports = DeficiencyEditingFormReact;\n\n//# sourceURL=webpack:///./lamiacarto/static/lamiacarto/js/plugins/forms/base3_urbandrainage/deficiencywidget.jsx?");

/***/ }),

/***/ "./lamiacarto/static/lamiacarto/js/plugins/forms/base3_urbandrainage/edgewidget.jsx":
/*!******************************************************************************************!*\
  !*** ./lamiacarto/static/lamiacarto/js/plugins/forms/base3_urbandrainage/edgewidget.jsx ***!
  \******************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n// import EditingFormReact from '../editingformwidget'\n// const EditingFormReact = require('../editingformwidget')\nconst EditingFormReact = __webpack_require__(/*! ../editingformwidget */ \"./lamiacarto/static/lamiacarto/js/plugins/forms/editingformwidget.jsx\"); //\n\n\nclass EdgeEditingFormReact extends EditingFormReact {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"table\", 'edge');\n\n    this.state = _objectSpread({\n      'currentlayer': '',\n      'currentfeatprop': {},\n      'formui': ':/static/forms/base3_urbandrainage/qgswidgets/lamia_form_edge_ui.ui'\n    }, this.state);\n  }\n\n  domLoaded() {\n    console.log('okok edge');\n    console.log('***', $('[name=\"networktype\"]'));\n    let comb = $('select[name=\"networktype\"]');\n    comb.append($('<option>', {\n      value: 1,\n      text: 'My option'\n    }));\n  }\n\n}\n\n_defineProperty(EdgeEditingFormReact, \"firstdir\", 'Assets');\n\n_defineProperty(EdgeEditingFormReact, \"label\", 'Edges');\n\nmodule.exports = EdgeEditingFormReact;\n\n//# sourceURL=webpack:///./lamiacarto/static/lamiacarto/js/plugins/forms/base3_urbandrainage/edgewidget.jsx?");

/***/ }),

/***/ "./lamiacarto/static/lamiacarto/js/plugins/forms/base3_urbandrainage/mediawidget.jsx":
/*!*******************************************************************************************!*\
  !*** ./lamiacarto/static/lamiacarto/js/plugins/forms/base3_urbandrainage/mediawidget.jsx ***!
  \*******************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nconst EditingFormReact = __webpack_require__(/*! ../editingformwidget */ \"./lamiacarto/static/lamiacarto/js/plugins/forms/editingformwidget.jsx\");\n\nconst $ = __webpack_require__(/*! jquery */ \"./node_modules/jquery/dist/jquery.js\");\n\nclass MediaEditingFormReact extends EditingFormReact {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"table\", 'media');\n\n    _defineProperty(this, \"projectdata\", JSON.parse(JSON.parse(document.getElementById('context').textContent)));\n\n    _defineProperty(this, \"updateImage\", () => {\n      if (this.state.currentfeatprop.file && this.state.currentfeatprop.file !== undefined) {\n        let url = \"http://\" + window.location.host + '/media/' + this.projectdata.pgdbname + '/' + this.projectdata.pgschema + '/' + this.state.currentfeatprop.file;\n        $(\"#lamiamedia\").remove();\n        $('div[name=\"frame_ph\"]').prepend($('<img>', {\n          id: 'lamiamedia',\n          src: url,\n          width: 200\n        }));\n      } else {\n        $(\"#lamiamedia\").remove();\n      }\n    });\n\n    this.state = {\n      'currentlayer': '',\n      'currentfeatprop': {},\n      'formui': ':/static/forms/base3/qgswidgets/lamia_form_camera_ui.ui'\n    };\n    let tempparentjoin = {};\n    let linkdict = {\n      \"colparent\": \"id_object\",\n      \"colthistable\": \"id_resource\",\n      \"tctable\": \"Tcobjectresource\",\n      \"tctablecolparent\": \"lid_object\",\n      \"tctablecolthistable\": \"lid_resource\"\n    };\n    let tables = [\"observation\", \"node\", \"edge\", \"surface\", \"equipment\", \"facility\"];\n    tables.forEach(el => {\n      tempparentjoin[el] = linkdict;\n    });\n    this.PARENTJOIN = tempparentjoin;\n    this.TABLEFILTERFIELD = {\n      \"typemedia\": \"PHO\"\n    };\n  }\n\n  render() {\n    let res = super.render();\n    return res;\n  }\n\n  componentDidUpdate() {\n    this.updateImage();\n  }\n\n}\n\n_defineProperty(MediaEditingFormReact, \"firstdir\", 'Resources');\n\n_defineProperty(MediaEditingFormReact, \"label\", 'Media');\n\nmodule.exports = MediaEditingFormReact;\n\n//# sourceURL=webpack:///./lamiacarto/static/lamiacarto/js/plugins/forms/base3_urbandrainage/mediawidget.jsx?");

/***/ }),

/***/ "./lamiacarto/static/lamiacarto/js/plugins/forms/base3_urbandrainage/nodewidget.jsx":
/*!******************************************************************************************!*\
  !*** ./lamiacarto/static/lamiacarto/js/plugins/forms/base3_urbandrainage/nodewidget.jsx ***!
  \******************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n// import EditingFormReact from '../editingformwidget'\nconst EditingFormReact = __webpack_require__(/*! ../editingformwidget */ \"./lamiacarto/static/lamiacarto/js/plugins/forms/editingformwidget.jsx\");\n\nconst MediaEditingFormReact = __webpack_require__(/*! ./mediawidget */ \"./lamiacarto/static/lamiacarto/js/plugins/forms/base3_urbandrainage/mediawidget.jsx\");\n\nconst DeficiencyEditingFormReact = __webpack_require__(/*! ./deficiencywidget */ \"./lamiacarto/static/lamiacarto/js/plugins/forms/base3_urbandrainage/deficiencywidget.jsx\");\n\nconst {\n  collectGroupLayers\n} = __webpack_require__(/*! qwc2/utils/LayerUtils */ \"./qwc2/utils/LayerUtils.js\"); //\n\n\nclass NodeEditingFormReact extends EditingFormReact {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"table\", 'node');\n\n    _defineProperty(this, \"childwdg\", [MediaEditingFormReact, DeficiencyEditingFormReact]);\n\n    _defineProperty(this, \"combostacked\", {\n      'nodetype': {\n        'val': null,\n        'stackedname': 'stackedWidget_obs',\n        idx: [['60', '62'], ['61'], ['10'], ['21'], ['70', '72', '71']]\n      }\n    });\n\n    _defineProperty(this, \"buttonClicked\", e => {\n      this.combostacked[e.target.name].val = e.target.options[e.target.selectedIndex].value;\n    });\n\n    _defineProperty(this, \"updateStacked\", () => {\n      for (const [key, value] of Object.entries(this.combostacked)) {\n        let combo = $('select[name=\"' + key + '\"]');\n\n        if (!combo.length) {\n          continue;\n        }\n\n        let comboval = 0;\n\n        if (this.combostacked[key].val) {\n          comboval = this.combostacked[key].val;\n          this.combostacked[key].val = null;\n        } else {\n          comboval = combo[0].options[combo[0].selectedIndex].value;\n        }\n\n        let stackedname = this.combostacked[key].stackedname;\n        let done = false;\n\n        for (const [idx, stackedidx] of this.combostacked[key].idx.entries()) {\n          if (stackedidx.includes(comboval)) {\n            this.setStackedCurrentIndex(stackedname, idx);\n            done = true;\n            break;\n          }\n        }\n\n        if (!done) {\n          this.setStackedCurrentIndex(stackedname, this.combostacked[key].idx.length);\n        }\n      }\n    });\n\n    this.state = _objectSpread({\n      'currentlayer': '',\n      'currentfeatprop': {},\n      'formui': ':/static/forms/base3_urbandrainage/qgswidgets/lamia_form_node_ui.ui'\n    }, this.state); // this.props = { childwdg: [MediaEditingFormReact], ...this.props }\n  }\n\n  domLoaded() {\n    for (const key of Object.keys(this.combostacked)) {\n      $('select[name=\"' + key + '\"]').change(this.buttonClicked);\n    }\n  }\n\n  componentDidUpdate() {\n    super.componentDidUpdate();\n    this.updateStacked();\n  }\n\n}\n\n_defineProperty(NodeEditingFormReact, \"firstdir\", 'Assets');\n\n_defineProperty(NodeEditingFormReact, \"label\", 'Nodes');\n\nmodule.exports = NodeEditingFormReact;\n\n//# sourceURL=webpack:///./lamiacarto/static/lamiacarto/js/plugins/forms/base3_urbandrainage/nodewidget.jsx?");

/***/ }),

/***/ "./lamiacarto/static/lamiacarto/js/plugins/forms/base3_urbandrainage/observationwidget.jsx":
/*!*************************************************************************************************!*\
  !*** ./lamiacarto/static/lamiacarto/js/plugins/forms/base3_urbandrainage/observationwidget.jsx ***!
  \*************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n// import EditingFormReact from '../editingformwidget'\nconst EditingFormReact = __webpack_require__(/*! ../editingformwidget */ \"./lamiacarto/static/lamiacarto/js/plugins/forms/editingformwidget.jsx\"); //\n\n\nclass ObservationEditingFormReact extends EditingFormReact {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"table\", 'observation');\n\n    _defineProperty(this, \"updateStacked\", () => {\n      if (this.props.parentwdg && this.props.parentwdg.props.parentwdg && this.props.parentwdg.props.parentwdg.table === 'node') {}\n    });\n\n    this.state = _objectSpread({\n      'currentlayer': '',\n      'currentfeatprop': {},\n      'formui': ':/static/forms/base3_urbandrainage/qgswidgets/lamia_form_observation_ui.ui'\n    }, this.state);\n    this.PARENTJOIN = {\n      \"deficiency\": {\n        \"colparent\": \"id_deficiency\",\n        \"colthistable\": \"lid_deficiency\",\n        \"tctable\": null,\n        \"tctablecolparent\": null,\n        \"tctablecolthistable\": null\n      }\n    };\n    this.CHOOSERTREEWDGSPEC = {\n      \"colshow\": [\"datetimeobservation\"],\n      \"sort\": [\"datetimeobservation\", \"DESC\"]\n    };\n  }\n\n  componentDidUpdate() {\n    super.componentDidUpdate();\n    this.updateStacked();\n  }\n\n}\n\n_defineProperty(ObservationEditingFormReact, \"firstdir\", 'State');\n\n_defineProperty(ObservationEditingFormReact, \"label\", 'Observations');\n\nmodule.exports = ObservationEditingFormReact;\n\n//# sourceURL=webpack:///./lamiacarto/static/lamiacarto/js/plugins/forms/base3_urbandrainage/observationwidget.jsx?");

/***/ }),

/***/ "./lamiacarto/static/lamiacarto/js/plugins/forms/base3_urbandrainage/reportwidget.jsx":
/*!********************************************************************************************!*\
  !*** ./lamiacarto/static/lamiacarto/js/plugins/forms/base3_urbandrainage/reportwidget.jsx ***!
  \********************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n// import EditingFormReact from '../editingformwidget'\n// const EditingFormReact = require('../editingformwidget')\nconst EditingFormReact = __webpack_require__(/*! ../editingformwidget */ \"./lamiacarto/static/lamiacarto/js/plugins/forms/editingformwidget.jsx\");\n\nconst $ = __webpack_require__(/*! jquery */ \"./node_modules/jquery/dist/jquery.js\"); // import ReactDOM from \"react-dom\";\n\n\nconst ReactDOM = __webpack_require__(/*! react-dom */ \"./node_modules/react-dom/index.js\");\n\nconst axios = __webpack_require__(/*! axios */ \"./node_modules/axios/index.js\");\n\naxios.defaults.xsrfHeaderName = \"X-CSRFTOKEN\";\naxios.defaults.xsrfCookieName = \"csrftoken\"; // import fileDownload from 'js-file-download';\n\nconst fileDownload = __webpack_require__(/*! js-file-download */ \"./node_modules/js-file-download/file-download.js\");\n\nclass ReportEditingFormReact extends EditingFormReact {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"table\", 'report');\n\n    _defineProperty(this, \"projectdata\", JSON.parse(JSON.parse(document.getElementById('context').textContent)));\n\n    this.state = _objectSpread({\n      'currentlayer': '',\n      'currentfeatprop': {},\n      'formui': ':/static/forms/base3/qgswidgets/lamia_form_report_ui.ui'\n    }, this.state);\n  }\n\n  domLoaded() {\n    console.log('okok report'); // let comb = $('button[name=\"pushButton_openph\"]')\n\n    $('button[name=\"pushButton_openph\"]').click(this.buttonClicked.bind(this));\n  }\n\n  buttonClicked() {\n    console.log('lklk');\n    console.log($('input[name=\"file\"]'));\n    console.log($('input[name=\"file\"]').value);\n    console.log($('input[name=\"file\"]').val()); // this.projectdata.id_project pgdbname pgschema\n\n    console.log('***', this.projectdata);\n    let url = \"http://\" + window.location.host + '/media/' + this.projectdata.pgdbname + '/' + this.projectdata.pgschema + '/' + $('input[name=\"file\"]').val();\n    console.log(url);\n    let filename = $('input[name=\"name\"]').val() + '.' + $('input[name=\"file\"]').val().split('.').pop();\n    console.log(filename); // axios.request({ url, responseType: 'blob' })\n    //     .then(({ data }) => {\n    //         const downloadUrl = window.URL.createObjectURL(new Blob([data]));\n    //         const link = document.createElement('a');\n    //         link.href = downloadUrl;\n    //         link.setAttribute('download', filename); //any other extension\n    //         document.body.appendChild(link);\n    //         link.click();\n    //         link.remove();\n    //     })\n\n    axios.get(url, {\n      responseType: 'blob'\n    }).then(res => {\n      fileDownload(res.data, filename);\n    });\n  }\n\n}\n\n_defineProperty(ReportEditingFormReact, \"firstdir\", 'Resources');\n\n_defineProperty(ReportEditingFormReact, \"label\", 'Reports');\n\nmodule.exports = ReportEditingFormReact;\n\n//# sourceURL=webpack:///./lamiacarto/static/lamiacarto/js/plugins/forms/base3_urbandrainage/reportwidget.jsx?");

/***/ }),

/***/ "./lamiacarto/static/lamiacarto/js/plugins/forms/editingformwidget.jsx":
/*!*****************************************************************************!*\
  !*** ./lamiacarto/static/lamiacarto/js/plugins/forms/editingformwidget.jsx ***!
  \*****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nconst React = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n\nconst {\n  connect\n} = __webpack_require__(/*! react-redux */ \"./node_modules/react-redux/es/index.js\");\n\nconst QtDesignerForm = __webpack_require__(/*! qwc2/components/QtDesignerForm */ \"./qwc2/components/QtDesignerForm.jsx\");\n\nconst VectorLayerUtils = __webpack_require__(/*! qwc2/utils/VectorLayerUtils */ \"./qwc2/utils/VectorLayerUtils.js\");\n\nconst Message = __webpack_require__(/*! qwc2/components/I18N/Message */ \"./qwc2/components/I18N/Message.jsx\");\n\nconst axios = __webpack_require__(/*! axios */ \"./node_modules/axios/index.js\");\n\naxios.defaults.xsrfHeaderName = \"X-CSRFTOKEN\";\naxios.defaults.xsrfCookieName = \"csrftoken\";\n\nclass EditingFormReact extends React.Component {\n  constructor(props) {\n    super(props); // https://www.freecodecamp.org/news/react-changing-state-of-child-component-from-parent-8ab547436271/\n\n    _defineProperty(this, \"table\", null);\n\n    _defineProperty(this, \"childwdg\", []);\n\n    _defineProperty(this, \"projectdata\", JSON.parse(JSON.parse(document.getElementById('context').textContent)));\n\n    _defineProperty(this, \"updateField\", (key, value) => {\n      let tempvar = this.state.currentfeatprop;\n      Object.assign(tempvar, {\n        [key]: value\n      });\n      this.setState({\n        currentfeatprop: tempvar\n      });\n    });\n\n    _defineProperty(this, \"handleTabChange\", evt => {\n      // console.log('change', evt.target.value, this.constructor.name)\n      // console.log(this.childrefs)\n      let currentinstance = null;\n\n      if (evt.target.value == 0) {\n        currentinstance = this;\n      } else {\n        currentinstance = this.childrefs[evt.target.value - 1].current;\n      }\n\n      this.props.mainiface.setCurrentWidgetInstance(currentinstance);\n    });\n\n    _defineProperty(this, \"setStackedCurrentIndex\", (stackedname, stackedindex) => {\n      let elm = $('div[name=\"' + stackedname + '\"]');\n\n      if (!elm.length) {\n        return;\n      }\n\n      elm[0].childNodes.forEach((node, idx) => {\n        let toto = $(node);\n\n        if (stackedindex === idx) {\n          toto.css(\"display\", 'block');\n        } else {\n          toto.css(\"display\", 'none');\n        }\n      });\n    });\n\n    this.currentform = React.createRef();\n    this.maintab = React.createRef();\n    this.state = {\n      isloading: true,\n      ids: []\n    };\n    this.childrefs = [];\n    this.ids = {};\n    this.PARENTJOIN = null;\n    this.TABLEFILTERFIELD = null;\n  } // static getDerivedStateFromProps(props, state) {\n  //     console.log('getDerivedStateFromProps')\n  //     if (props.parentwdg) {\n  //         console.log(props.parentwdg.table)\n  //         console.log(props.parentproperties)\n  //     }\n  //     return null\n  // }\n\n\n  render() {\n    console.log('render', this.constructor.name);\n\n    if (this.state.isloading) {\n      return /*#__PURE__*/React.createElement(\"p\", null, \"Loading ... \");\n    }\n\n    let qtform = /*#__PURE__*/React.createElement(QtDesignerForm, {\n      domLoaded: this.domLoaded,\n      ref: this.currentform,\n      updateField: this.updateField,\n      form: this.state.formui,\n      values: this.state.currentfeatprop,\n      keyvalues: this.state.keyvalues,\n      domLoaded: this.domLoaded.bind(this)\n    });\n    let childdom = [];\n    this.childwdg.forEach((childwd, idx) => {\n      // console.log(childwd)\n      // console.log('***', childwd.table, childwd.label)\n      childdom.push( /*#__PURE__*/React.createElement(\"input\", {\n        value: idx + 1,\n        type: \"radio\",\n        id: 'maintab' + childwd.label,\n        key: 'maintab' + childwd.label + idx * 3,\n        name: this.table,\n        onChange: this.handleTabChange\n      }));\n      childdom.push( /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: 'maintab' + childwd.label,\n        key: 'maintab' + childwd.label + idx * 3 + 1\n      }, /*#__PURE__*/React.createElement(Message, {\n        msgId: 'qtdesigner.' + childwd.label\n      })));\n      let Childwd = childwd;\n      childdom.push( /*#__PURE__*/React.createElement(\"div\", {\n        className: \"qt-designer-tab\",\n        key: 'maintab' + childwd.label + idx * 3 + 2\n      }, /*#__PURE__*/React.createElement(Childwd, {\n        ref: this.childrefs[idx] // setCurrentWidgetInstance={this.props.setCurrentWidgetInstance}\n        ,\n        mainiface: this.props.mainiface,\n        parentwdg: this,\n        parentproperties: this.state.currentfeatprop\n      })));\n    });\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"qt-designer-tabs\",\n      name: this.table\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"radio\",\n      value: 0,\n      id: 'maintab' + this.table,\n      name: this.table,\n      defaultChecked: true,\n      onChange: this.handleTabChange\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: 'maintab' + this.table\n    }, /*#__PURE__*/React.createElement(Message, {\n      msgId: 'qtdesigner.Properties'\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"qt-designer-tab\"\n    }, qtform), childdom);\n  }\n\n  componentDidMount() {\n    this.childrefs = [];\n    this.childwdg.forEach((childwd, idx) => {\n      this.childrefs.push(React.createRef());\n    });\n    this.getKeyvalues();\n  }\n\n  componentDidUpdate() {\n    if (this.childrefs) {\n      this.childrefs.forEach((childref, idx) => {\n        childref.current.updateProperties();\n      });\n    } // console.log('*', this.constructor.name)\n    // console.log(this.props.mainiface.currentwdginstance === this, this.props.mainiface.state.ids !== this.ids)\n    // console.log(this.ids, this.props.mainiface.state.ids)\n    // if ((this.props.mainiface.currentwdginstance === this) && (this.props.mainiface.state.ids !== this.ids)) {\n    //     console.log('stating id', this.constructor.name)\n    //     this.props.mainiface.setState({ ids: this.ids })\n    // }\n\n  }\n\n  others_________________________() {}\n\n  async updateProperties() {\n    if (this.props.parentproperties) {\n      // console.log('up', this.constructor.name)\n      let parentpk = this.props.parentproperties['pk_' + this.props.parentwdg.table];\n      console.log('*', this.props.parentwdg.table, this.props.parentproperties['pk_' + this.props.parentwdg.table]);\n\n      if (!parentpk) {\n        return;\n      }\n\n      let url = 'http://' + window.location.host + '/lamiaapi/' + this.projectdata.id_project + '/' + this.table;\n      let res = await axios.post(url, {\n        function: 'getids',\n        parentjoin: this.PARENTJOIN,\n        tablefilterfield: this.TABLEFILTERFIELD,\n        choosertreewdgspec: this.CHOOSERTREEWDGSPEC,\n        parenttablename: this.props.parentwdg.table,\n        parentpk: parentpk\n      });\n      this.ids = JSON.parse(res.data);\n\n      if (Object.entries(this.ids).length === 0 || !this.ids.pk) {\n        this.setState({\n          currentfeatprop: {}\n        });\n        return;\n      } else {\n        // console.log('***', this.table, this.ids)\n        // let featdata = await this.getPropertiesFromPk(this.ids.pk[0])\n        // this.setState({ currentfeatprop: featdata.properties })\n        this.displayProperties(this.ids.pk[0]);\n      }\n\n      if (this.props.mainiface.currentwdginstance === this) {\n        console.log('idrend up', this.constructor.name);\n        this.props.mainiface.idchooserref.current.setState({\n          ids: this.ids\n        });\n      }\n    }\n  }\n\n  async displayProperties(pk) {\n    let featdata = {};\n\n    if (pk !== undefined) {\n      featdata = await this.getPropertiesFromPk(pk);\n      featdata = featdata.properties;\n    }\n\n    this.setState({\n      currentfeatprop: featdata\n    });\n  }\n\n  async pointClicked(coords) {\n    let url = 'http://' + window.location.host + '/lamiaapi/' + this.projectdata.id_project + '/' + this.table;\n    let res = await axios.post(url, {\n      function: 'nearest',\n      // layer: this.table,\n      coords: coords\n    });\n    let response = JSON.parse(res.data); // let temp = this.projectdata.qgisserverurl + 'qgisserver/wfs3/collections/' + this.table + '_qgis/items/' + response.nearestpk + '.json'\n    // let feat = await axios.get(temp)\n\n    let featdata = await this.getPropertiesFromPk(response.nearestpk);\n    this.setState({\n      currentfeatprop: featdata.properties\n    });\n    featdata.geometry = VectorLayerUtils.reprojectGeometry(featdata.geometry, 'EPSG:4326', 'EPSG:3857');\n    let ollayer = this.props.mainiface.props.layers.find(layer => layer.title === \"Lamiasel\");\n    this.props.mainiface.props.addLayerFeatures(ollayer, [featdata], true);\n  }\n\n  async getPropertiesFromPk(pk) {\n    let temp = this.projectdata.qgisserverurl + 'qgisserver/wfs3/collections/' + this.table + '_qgis/items/' + pk + '.json';\n    let feat = await axios.get(temp);\n    console.log('feat', this.constructor.name, feat.data);\n    return feat.data;\n  }\n\n  domLoaded() {\n    null;\n  }\n\n  async getKeyvalues() {\n    // keyvalues = { 'comboBox_typeReseau': [{ key: 'popo', value: 'tete' }] }\n    let url = 'http://' + window.location.host + '/lamiaapi/' + this.projectdata.id_project + '/' + this.table;\n    let res = await axios.post(url, {\n      function: 'dbasetables'\n    });\n    let dictfields = res.data;\n    let keyvalues = {};\n\n    for (const [key, value] of Object.entries(dictfields)) {\n      if (value.Cst) {\n        keyvalues[key] = [];\n\n        for (const [keyb, valueb] of Object.entries(value.Cst)) {\n          keyvalues[key].push({\n            key: valueb[1],\n            value: valueb[0]\n          });\n        }\n      }\n    }\n\n    this.setState({\n      isloading: false,\n      keyvalues: keyvalues\n    });\n  }\n\n}\n\nmodule.exports = EditingFormReact;\n\n//# sourceURL=webpack:///./lamiacarto/static/lamiacarto/js/plugins/forms/editingformwidget.jsx?");

/***/ }),

/***/ "./lamiacarto/static/lamiacarto/js/plugins/idchooser.jsx":
/*!***************************************************************!*\
  !*** ./lamiacarto/static/lamiacarto/js/plugins/idchooser.jsx ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nconst React = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n\nclass IdChooser extends React.Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"handleLayerChanged\", e => {\n      console.log('cl', e.target.id);\n      this.props.mainiface.currentwdginstance.displayProperties(e.target.id);\n    });\n\n    this.state = {\n      ids: {}\n    };\n  }\n\n  render() {\n    console.log('idrend');\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"btn-group mr-2\",\n      role: \"group\",\n      \"aria-label\": \"First group\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"dropdown\"\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-secondary dropdown-toggle\",\n      type: \"button\",\n      id: \"dropdownMenuButton\",\n      \"data-toggle\": \"dropdown\",\n      \"aria-haspopup\": \"true\",\n      \"aria-expanded\": \"false\"\n    }, \"Ids\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"dropdown-menu\",\n      \"aria-labelledby\": \"dropdownMenuButton\"\n    }, this.createIdDrop.bind(this)())));\n  }\n\n  createIdDrop() {\n    console.log('createIdDrop', this.state.ids);\n\n    if (!this.state.ids.pk) {\n      return [];\n    }\n\n    let finaldatas = []; // for (var id in this.currentwdginstance.ids) {\n    // Object.keys(driversCounter)\n\n    for (var key in Object.keys(this.state.ids.pk)) {\n      console.log(key);\n      finaldatas.push( /*#__PURE__*/React.createElement(\"a\", {\n        className: \"dropdown-item\",\n        id: this.state.ids.pk[key],\n        key: key,\n        onClick: this.handleLayerChanged.bind(this) // onClick={() => this.handleLayerChanged.bind(this)}\n\n      }, this.state.ids.id[key])); // finaldatas.push(<a className=\"dropdown-item\" id={dataraw[firstdir][seconddir].label} >{seconddir}</a>)\n    }\n\n    return finaldatas;\n  }\n\n}\n\nmodule.exports = IdChooser;\n\n//# sourceURL=webpack:///./lamiacarto/static/lamiacarto/js/plugins/idchooser.jsx?");

/***/ })

})