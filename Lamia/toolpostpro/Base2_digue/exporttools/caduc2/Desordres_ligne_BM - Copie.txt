###Desordre
#nom              type               cst               valeur     
id_desordre;         Int;                  ;     id_desordre        
cote;      String;             cote  ;                  cote
position;      String;             position  ;                  position
catdes;      String;             catdes  ;                  catdes
typedes;      String;             typedes  ;                  typedes

###Observation
#nom              type               cst               valeur    
id_observation;         Int;                  ;     id_observation  
dateobservation;      String;               ;                  datetimeobservation
source;      String;               ;                  source
nombre;         Int;                  ;     nombre  
gravite;      String;         gravite      ;                  Observation_qgis.gravite
evolution;      String;               ;                  evolution
commentairesuite;      String;               ;                  commentairesuite

###Zonegeo
## FROM Zonegeo_qgis WHERE ST_WITHIN(ST_MakeValid(Desordre.geom),ST_MakeValid(Zonegeo_qgis.geom))
pk_zonegeo;     Int;            ;        pk_zonegeo ;  pk_zonegeo

###Objet
##FROM Objet WHERE  Objet.pk_objet = Observation_qgis.pk_objet
#nom              type               cst               valeur             
id_objet;         Int;                  ;     id_objet         
commentaire;      String;               ;                  commentaire

###geom
geom;         Int;               ;                  ST_AsText(geom)

###main
FROM Observation_qgis INNER JOIN Desordre ON  Desordre.id_desordre = Observation_qgis.lid_desordre AND Observation_qgis.datetimeobservation = (SELECT datetimeobservation FROM Observation as Observationtemp WHERE Observationtemp.lid_desordre=Desordre.id_desordre ORDER BY datetimeobservation DESC LIMIT 1)   WHERE ST_GeometryType(ST_MakeValid(geom)) = 'LINESTRING'
